#AF Kernel 3.1

Ядро для написания ботов в ВКонтакте


#Настройки бота

В папке config есть(должны быть) 2 файла bot_info.py и kernel_info.py

В файле bot_info.py находятся токен бота, айди группы бота, айди админов и префикс бота

В файле kernel_info.py находится информация о ядре и его запуске, название файлов/папок, также там находится переменные различные разрешения для запуска


#Запуск бота

Для запуска ядра нужно запустить файл start.py или faststart.py, разница в том что во втором файле не выводится информация при старте

В файлах запуска находятся переменная pips в ней находятся модули через ; которые нужно установить, если нужно установить определенные пакеты то после названия модуля ставится : и после него через запятую перечисляются пакеты (random:choice,randint;)


#Настройка/создание команд

В AF Kerenl 3.1 команды являются отдельными файлами и подгружаются при старте

Команда с командой  в первой строке должен иметь коментарий #Afgach_command, это даст ядру понять что его нужно подгружать

Теперь по переменным которые обозначаются в команде

author - Автор команды(str)
mode - Мод команды может принимать занчения param/only (устаревшая,str)
command_new - является ли команда написанна для для новых версий AF Kernel (устаревшая,False/True)
command_id - id команды или ее обоначение на английском(str)
command_ru - команда на русском (или нет) именно по этому параметру будет вызыватся команда(str)
command_info - информация о команде для админов/разработчиков(str)
command_help - информация о том как использовать команду(str)
Ниже код


Все файлы-команды должны хранится в папке commands там также преведенно несколько примеров команд

#Устройство ядра

При запуске файла сначало устанавливаются модули (pip), потом идет загрузка настроек ядра из файла kernel_info.py из папки config

Проводится проверка файлов, при отсутствии некоторых файлов и с получением нужного разарешния создаются нужные файлы

Начинается подгрузка сервисов и функций

Старт ядра, при неудачном запуске выводится сообщение и ошибка

Идет обозначение переменных, подключение к серверу vk-api, и подгрузка команд

##Как проходит подгрузка команд

После считывание файлов в папке commands начинается перебор их содержимого, а точнее первой строки

Если первая строка является #Afgach_command то содержимое файла считается командой и начинается его подгрузка, обозначение переменных, авторов, информацию и путь к файлу и т.д.

После заваершения подргрузки команд запускается основной цикл который "слушает" вк сервер

При получении event'а запускается поток и начинается выполнение файла со вторичным ядром

В нем находится алгоритм выполнения команд, включение сервисов и т.п.

После окончания выполнения вторичного ядра поток существует ещё 5 секунд а потом завершается

И на этом завершается процесс при получении event'a



